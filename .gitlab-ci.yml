build:
    image: jrbeverly/pdf2htmlex
    stage: build
    script:
        - "apk --no-cache add curl zip"
        - "if [ -n ${BUILD_ID} ]; then curl -o artifacts.zip --header \"PRIVATE-TOKEN: ${ARTIFACT_TOKEN}\" \"https://gitlab.com/api/v3/projects/${PROJECT_ID}/builds/${BUILD_ID}/artifacts\"; fi "
        - "unzip artifacts.zip"
        - "cd src/ && pdf2htmlEX --zoom 1.5 manual.pdf && mv index.html ../public/index.html"
    only:
        - triggers
    artifacts:
        paths:
            - public

pages:
    image: alpine:latest
    stage: deploy
    script:
     - "echo 'Nothing to do'"
    only:
        - triggers
    artifacts:
        paths:
            - public
